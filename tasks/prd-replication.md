# MF-010: Replication and Robustness Analysis

## Status
Ready for Implementation

## Goal
Evaluate whether the **liquidity-first ordering** finding persists across multiple days and under small threshold variations, using the existing pipeline with no modifications to core logic.

---

## Motivation

The initial run on 2024-03-28 BTCUSDT data detected 3 events, all classified as `liquidity-first`. Before drawing conclusions, we must answer:

1. **Replication**: Does this pattern hold across other trading days?
2. **Robustness**: Is the result sensitive to threshold choices?
3. **Aggregation**: Can we produce a summary table suitable for a research writeup?

---

## Non-Goals

- No new metrics
- No new detectors
- No changes to core pipeline logic
- No prediction or trading signals

---

## User Stories

### US-1: Multi-Day Pipeline Runs
Run the existing pipeline on N additional BTCUSDT trading days.

**Acceptance Criteria:**
- Pipeline runs on at least 3 distinct dates
- Each run produces `event_orderings.csv` in outputs
- No code changes to `src/market_forensics/`

### US-2: Aggregate Ordering Summary
Collect ordering outcomes across all runs into a single summary table.

**Acceptance Criteria:**
- Produces `replication_summary.csv` with columns: `date, events_detected, windows_extracted, liquidity_first_count, price_first_count, trade_first_count`
- Summary is generated by a standalone script (not modifying core pipeline)

### US-3: Threshold Sensitivity Check
Run the pipeline with ±20% threshold variations (e.g., 0.4%, 0.5%, 0.6%).

**Acceptance Criteria:**
- Produces `sensitivity_summary.csv` showing ordering counts by threshold
- Uses config overrides, not hardcoded changes

### US-4: Clean Research Output
Generate final summary tables and optional visualizations for writeup.

**Acceptance Criteria:**
- All outputs are reproducible from config + data
- Summary includes total event counts and ordering breakdown

---

## Data Requirements

| Date | Symbol | Path |
|------|--------|------|
| 2024-03-28 | BTCUSDT | `data/binance/futures_um/BTCUSDT/canonical/2024-03-28/` |
| (TBD) | BTCUSDT | Additional dates to be canonicalized |

---

## Implementation Notes

1. **Config-driven dates**: Create a list of dates to process
2. **Wrapper script**: `scripts/run_replication.py` loops over dates and aggregates
3. **No changes to `src/`**: All orchestration in `scripts/`

---

## Success Criteria

- Clear answer to: "Is liquidity-first ordering consistent?"
- A table showing ordering breakdown across ≥3 days
- Sensitivity analysis showing stability (or instability) under threshold changes
- Outputs suitable for inclusion in a technical writeup
