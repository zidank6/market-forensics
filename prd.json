{
    "project": "market-forensics",
    "branchName": "feat/market-forensics-v2",
    "userStories": [
        {
            "id": "MF-V2-001",
            "title": "Select and document target dates for analysis",
            "priority": 1,
            "passes": true,
            "description": "Choose 10-15 high-volatility trading days per asset and document them in a manifest file. User will manually download and canonicalize.",
            "acceptanceCriteria": [
                "Create config/dates.json with selected dates for BTCUSDT and ETHUSDT",
                "Prioritize known high-volatility days (news events, vol spikes)",
                "Document date selection rationale in config/dates.json comments or README",
                "Target: 10-15 dates per asset"
            ]
        },
        {
            "id": "MF-V2-002",
            "title": "Create multi-day multi-asset pipeline runner",
            "priority": 2,
            "passes": false,
            "description": "Build orchestration script that runs the existing pipeline across all dates and assets from the manifest.",
            "acceptanceCriteria": [
                "Create scripts/run_v2_analysis.py",
                "Reads dates from config/dates.json",
                "Runs pipeline for each (date, asset) pair that has data",
                "Outputs to outputs/v2/{asset}/{date}/",
                "Skips missing dates gracefully with warning",
                "No modifications to src/market_forensics/"
            ]
        },
        {
            "id": "MF-V2-003",
            "title": "Aggregate results into unified summary table",
            "priority": 3,
            "passes": false,
            "description": "Collect all event-level ordering results into a single aggregated dataset.",
            "acceptanceCriteria": [
                "Create scripts/aggregate_v2_results.py",
                "Reads all outputs/v2/{asset}/{date}/metrics/event_orderings.csv",
                "Produces outputs/v2_summary.csv with columns: date, asset, event_id, classification, onset_liquidity_sec, onset_price_sec, onset_volume_sec",
                "Compute onset_delta = onset_liquidity - onset_price",
                "Report total event count"
            ]
        },
        {
            "id": "MF-V2-004",
            "title": "Implement statistical tests for liquidity-first proportion",
            "priority": 4,
            "passes": false,
            "description": "Add formal statistical tests to quantify whether liquidity-first ordering occurs more often than chance.",
            "acceptanceCriteria": [
                "Create scripts/run_statistics.py",
                "Binomial test: liquidity-first proportion vs 33% null (3-class uniform)",
                "Bootstrap 95% CI on liquidity-first proportion (1000 resamples)",
                "Output to outputs/v2_stats.json with p-value, CI, counts",
                "Print human-readable summary to stdout"
            ]
        },
        {
            "id": "MF-V2-005",
            "title": "Generate key visualizations",
            "priority": 5,
            "passes": false,
            "description": "Create publication-quality plots showing the precedence pattern.",
            "acceptanceCriteria": [
                "Create scripts/generate_v2_figures.py",
                "Plot 1: Bar chart of ordering proportions (liquidity-first vs others)",
                "Plot 2: Histogram of onset deltas (t_liquidity - t_price in seconds)",
                "Save to outputs/figures/ as PNG",
                "Works without matplotlib (fallback to ASCII/CSV if unavailable)"
            ]
        },
        {
            "id": "MF-V2-006",
            "title": "Run threshold sensitivity analysis",
            "priority": 6,
            "passes": false,
            "description": "Verify results are robust to threshold variations.",
            "acceptanceCriteria": [
                "Create scripts/run_sensitivity.py",
                "Test thresholds: 0.3%, 0.4%, 0.5%, 0.6%, 0.7%",
                "Re-run detection and ordering for each threshold",
                "Produce outputs/sensitivity.csv with columns: threshold, n_events, pct_liquidity_first",
                "Uses temp config overrides, not modifying default.json"
            ]
        },
        {
            "id": "MF-V2-007",
            "title": "Write v2 research findings document",
            "priority": 7,
            "passes": false,
            "description": "Produce a structured writeup summarizing v2 methodology and results.",
            "acceptanceCriteria": [
                "Create report/v2_findings.md",
                "Sections: Summary, Data, Methods, Results, Robustness, Limitations",
                "Include inline stats from v2_stats.json",
                "Reference figures from outputs/figures/",
                "State conclusion: is liquidity-first systematic?"
            ]
        }
    ]
}