## Codebase Patterns
- Canonical data lives in `data/binance/futures_um/{SYMBOL}/canonical/{YYYY-MM-DD}/` with `trades.csv` and `tob.csv`
- Raw Binance data downloaded from https://data.binance.vision/data/futures/um/daily/
- Config files in `config/` - replication dates documented in `config/replication_dates.json`
- Use `python3` not `python` on macOS
- Script arguments via argparse for reusability

---

## [2026-02-02 19:15] - MF-010
- What was implemented:
  - Downloaded raw Binance data for 2024-03-29 and 2024-03-30
  - Updated `scripts/canonicalize_binance_um_day.py` to accept --date and --symbol args
  - Canonicalized both new dates (trades.csv + tob.csv)
  - Created `config/replication_dates.json` manifest documenting all 3 available dates
- Files changed:
  - `scripts/canonicalize_binance_um_day.py` - added canonicalize_day() function with argparse CLI
  - `config/replication_dates.json` - new file documenting dates
  - `data/binance/futures_um/BTCUSDT/canonical/2024-03-29/` - new canonical data
  - `data/binance/futures_um/BTCUSDT/canonical/2024-03-30/` - new canonical data
- **Learnings for future iterations:**
  - Raw Binance files use naming convention: `{SYMBOL}-{feed}-{date}.csv`
  - Canonical files must have ISO timestamps for pipeline compatibility
  - 2024-03-29 had lower volume than 2024-03-28 (78MB vs 105MB trades)
  - 2024-03-30 was a weekend day with even lower volume (41MB trades)
---

## [2026-02-02 19:20] - MF-011
- What was implemented:
  - Created `scripts/run_replication.py` wrapper script
  - Script reads dates from `config/replication_dates.json` or accepts `--dates` CLI arg
  - Runs `python -m market_forensics.run` for each date with PYTHONPATH set
  - Outputs to `outputs/{date}/` to keep results separate
  - No modifications to `src/market_forensics/`
- Files changed:
  - `scripts/run_replication.py` - new file
- **Learnings for future iterations:**
  - Pipeline invoked via subprocess with PYTHONPATH=src
  - Config overrides via CLI args (--trades, --tob, --output)
  - Wrapper scripts live in `scripts/`, keep `src/` untouched for analysis changes
---
